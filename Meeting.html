<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Samsung Style Meeting Report (Smart Format)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --samsung-blue: #1428A0;
            --dark-navy: #03142F;
            --section-bg: #F7F8FA;
            --white: #FFFFFF;
            --font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
        }
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        body {
            font-family: var(--font-family); background-color: #eef1f5; margin: 0; padding: 40px;
            display: flex; justify-content: center; gap: 40px; color: #333; flex-wrap: wrap; 
        }

        .editor-panel {
            width: 400px; background: var(--white); padding: 32px; border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); height: fit-content;
            position: sticky; top: 20px; z-index: 10;
        }
        .editor-panel h2 {
            font-size: 20px; font-weight: 700; color: var(--samsung-blue);
            margin: 0 0 24px 0; border-bottom: 2px solid var(--samsung-blue); padding-bottom: 12px;
        }

        .input-group { margin-bottom: 20px; }
        .input-group label {
            display: block; font-size: 12px; font-weight: 700; color: #555;
            margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;
        }
        .input-field {
            width: 100%; padding: 12px; border: 1px solid #ddd;
            background-color: #fcfcfc; border-radius: 4px; font-family: inherit; font-size: 15px; 
            box-sizing: border-box; transition: border 0.2s;
        }
        .input-field:focus { border-color: var(--samsung-blue); outline: none; }
        textarea.input-field { resize: vertical; min-height: 200px; line-height: 1.6; }

        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 24px; }
        .btn-row { display: flex; gap: 10px; } 
        
        button { cursor: pointer; font-family: inherit; transition: all 0.2s; border: none; border-radius: 4px;}
        
        .btn-copy-prompt {
            background: #333; color: white; padding: 12px; width: 100%;
            font-size: 13px; font-weight: 700; 
        }
        .btn-copy-prompt:hover { background: #555; transform: translateY(-1px); }

        .btn-format {
            background: var(--samsung-blue); color: white; padding: 16px;
            font-size: 15px; font-weight: 700; width: 100%; box-shadow: 0 4px 10px rgba(20, 40, 160, 0.2);
        }
        .btn-format:hover { background: #102080; transform: translateY(-1px); }

        .btn-download {
            background: var(--white); color: var(--dark-navy); border: 1px solid #ccc;
            padding: 12px; font-size: 13px; font-weight: 600; flex: 1;
        }
        .btn-download:hover { background: #f0f0f0; border-color: #999; }
        
        .preview-wrapper {
            flex: 1; display: flex; justify-content: center; background: #525659;
            padding: 40px; border-radius: 8px; overflow-x: auto; 
        }
        #report-content {
            width: 210mm; min-height: 297mm; flex-shrink: 0; background: white;
            padding: 25mm; box-sizing: border-box; position: relative;
            box-shadow: 0 0 25px rgba(0,0,0,0.3);
        }

        .doc-header {
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 30px; border-bottom: 2px solid var(--dark-navy); padding-bottom: 15px;
        }
        .doc-type { font-size: 11px; font-weight: 800; color: var(--samsung-blue); letter-spacing: 2px; display: block; margin-bottom: 4px; text-transform: uppercase;}
        .header-left h1 { font-size: 26px; font-weight: 800; margin: 0; color: var(--dark-navy); letter-spacing: -0.5px; }
        .header-right { text-align: right; font-size: 12px; color: #555; font-weight: 500; line-height: 1.4; }

        .executive-summary {
            background-color: var(--section-bg); border-left: 5px solid var(--samsung-blue);
            padding: 20px 25px; margin-bottom: 35px; border-radius: 0 4px 4px 0;
        }
        .section-label {
            font-size: 12px; font-weight: 800; color: var(--samsung-blue);
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; display: block;
        }
        .summary-text { 
            font-size: 15px; line-height: 1.7; color: #222; font-weight: 600; white-space: pre-line; 
        }

        .detail-section { margin-bottom: 30px; }
        .detail-content { 
            font-size: 14px; line-height: 1.8; color: #333; white-space: pre-wrap; 
            text-align: justify; word-break: keep-all; 
        }
        
        .result-section { 
            margin-top: 30px; padding: 20px; border: 1px solid #ddd; 
            background: #fff; border-radius: 4px; display: none; 
        }
        .result-title { 
            font-size: 14px; font-weight: 800; color: var(--dark-navy); margin-bottom: 12px; display: block; 
            border-bottom: 1px dashed #ccc; padding-bottom: 8px;
        }

        .doc-footer {
            position: absolute; bottom: 15mm; left: 25mm; right: 25mm;
            border-top: 1px solid #eee; padding-top: 10px;
            display: flex; justify-content: space-between; font-size: 10px; color: #aaa;
            font-family: Arial, sans-serif;
        }

        @media screen and (max-width: 1000px) {
            body { padding: 10px; gap: 20px; flex-direction: column; }
            .editor-panel { width: 100%; padding: 20px; }
            .preview-wrapper { width: 100%; padding: 10px; align-items: flex-start; justify-content: flex-start; }
            #report-content { transform: scale(0.65); transform-origin: top left; margin-bottom: -40%; }
        }
    </style>
</head>
<body>

    <div class="editor-panel">
        <h2>Report Generator</h2>
        
        <div class="input-group">
            <label>Date & Info</label>
            <input type="date" id="in-date" class="input-field" style="margin-bottom: 8px;">
            <input type="text" id="in-author" class="input-field" placeholder="ÏûëÏÑ±Ïûê (Ïòà: ÍπÄÎåÄÏõê)">
        </div>

        <div class="input-group">
            <label>Title</label>
            <input type="text" id="in-title" class="input-field" placeholder="ÌöåÏùò/Î≥¥Í≥†ÏÑú Ï†úÎ™©">
        </div>
        
        <div class="input-group" style="background: #eef1f5; padding: 15px; border-radius: 6px; border: 1px solid #ddd;">
            <label style="color:var(--samsung-blue); margin-bottom: 6px;">STEP 1. AI ÌîÑÎ°¨ÌîÑÌä∏ Î≥µÏÇ¨</label>
            <div style="font-size: 12px; color: #666; margin-bottom: 12px; line-height: 1.4;">
                <b>[ÌåÅ]</b> Ïù¥Ï†ú AIÍ∞Ä ÎãµÎ≥ÄÏóê <b>'Î≥µÏÇ¨ Î≤ÑÌäº'</b>ÏùÑ Îã¨ÏïÑÏ§çÎãàÎã§.<br>
                Î≤ÑÌäº ÌïòÎÇòÎ°ú Î≥µÏÇ¨Ìï¥ÏÑú ÏïÑÎûò Ïπ∏Ïóê Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî.
            </div>
            <button class="btn-copy-prompt" onclick="copyPrompt()">üìã ÌîÑÎ°¨ÌîÑÌä∏ Î≥µÏÇ¨ÌïòÍ∏∞</button>
        </div>

        <div class="input-group">
            <label>STEP 2. AI ÎãµÎ≥Ä Î∂ôÏó¨ÎÑ£Í∏∞</label>
            <textarea id="in-raw-text" class="input-field" 
                placeholder="AI ÎãµÎ≥Ä Ïö∞Ï∏° ÏÉÅÎã®Ïùò [Copy] Î≤ÑÌäºÏùÑ ÎàåÎü¨ Î≥µÏÇ¨Ìïú ÎÇ¥Ïö©ÏùÑ Ïó¨Í∏∞Ïóê Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî."></textarea>
        </div>

        <div class="btn-group">
            <button class="btn-format" onclick="applyFormat()">‚ú® Î≥¥Í≥†ÏÑú Ï†ÅÏö©ÌïòÍ∏∞</button>
            <div class="btn-row">
                <button class="btn-download" onclick="exportPDF()">PDF Ï†ÄÏû•</button>
                <button class="btn-download" onclick="exportJPG()">JPG Ï†ÄÏû•</button>
            </div>
        </div>
    </div>

    <div class="preview-wrapper">
        <div id="report-content">
            <header class="doc-header">
                <div class="header-left">
                    <span class="doc-type">Meeting Report</span>
                    <h1 id="out-title">Ï†úÎ™© ÏóÜÏùå</h1>
                </div>
                <div class="header-right">
                    <div id="out-date"></div>
                    <div id="out-author"></div>
                    <div style="color:#888; margin-top:4px;">Dept. Organic Material System Eng.</div>
                </div>
            </header>

            <section class="executive-summary">
                <span class="section-label">Executive Summary (Key Takeaways)</span>
                <div class="summary-text" id="out-summary">- ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</div>
            </section>

            <section class="detail-section">
                <span class="section-label" style="color: #666; border-bottom: 1px solid #ddd; width: 100%; padding-bottom: 5px; margin-bottom: 15px;">Detailed Information</span>
                <div class="detail-content" id="out-detail">- ÏÉÅÏÑ∏ ÎÇ¥Ïö©Ïù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.</div>

                <div class="detail-content result-section" id="out-result-wrapper">
                    <span class="result-title">‚ñ† Í≤∞Ï†ï ÏÇ¨Ìï≠ Î∞è Action Item</span>
                    <div id="out-result"></div>
                </div>
            </section>

            <footer class="doc-footer">
                <div>Confidential / Internal Use Only</div>
                <div>Generated by Smart Report Tool</div>
            </footer>
        </div>
    </div>

    <script>
        // 1. Ï¥àÍ∏∞ ÏÑ§Ï†ï
        const dateInput = document.getElementById('in-date');
        const today = new Date();
        dateInput.value = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
        
        function updateMeta() {
            const dateVal = dateInput.value.split('-');
            if(dateVal.length === 3) {
                document.getElementById('out-date').innerText = `Date: ${dateVal[0]}.${dateVal[1]}.${dateVal[2]}`;
            }
            const authorVal = document.getElementById('in-author').value;
            document.getElementById('out-author').innerText = authorVal ? `Author: ${authorVal}` : '';
            
            const titleVal = document.getElementById('in-title').value;
            document.getElementById('out-title').innerText = titleVal ? titleVal : "Ï†úÎ™© ÏóÜÏùå";
        }

        ['in-date', 'in-author', 'in-title'].forEach(id => {
            document.getElementById(id).addEventListener('input', updateMeta);
        });
        updateMeta();

        // 2. ÌîÑÎ°¨ÌîÑÌä∏ Î≥µÏÇ¨ (Î≥µÏÇ¨ Î≤ÑÌäº ÏÉùÏÑ± Î°úÏßÅ Ï∂îÍ∞Ä)
        function copyPrompt() {
            const promptText = `
ÎãπÏã†ÏùÄ ÎåÄÍ∏∞ÏóÖ Ï†ÑÎûµÍ∏∞ÌöçÌåÄÏùò ÏàòÏÑùÏûÖÎãàÎã§. ÏûÖÎ†•Îêú ÌöåÏùò ÏÜçÍ∏∞Î°ùÏùÑ Î∞îÌÉïÏúºÎ°ú "Í∞ÄÎèÖÏÑ± ÏµúÏÉÅ"Ïùò Î≥¥Í≥†ÏÑúÎ•º ÏûëÏÑ±Ìï¥Ïïº Ìï©ÎãàÎã§.

[ÏûëÏÑ± ÏõêÏπô - Ï†àÎåÄ Ï§ÄÏàò]
1. **ÎÇ¥Ïö© ÎàÑÎùΩ Í∏àÏßÄ:** ÏõêÎ¨∏Ïùò Ìå©Ìä∏, ÏàòÏπò, ÎÇ†Ïßú, Í≥†Ïú†Î™ÖÏÇ¨Îäî 100% Î∞òÏòÅÌïòÏã≠ÏãúÏò§.
2. **Ïò§ÌÉÄ/ÎπÑÎ¨∏ ÏàòÏ†ï:** Ï†ÑÎ¨∏Ï†ÅÏù∏ ÎπÑÏ¶àÎãàÏä§ Ïö©Ïñ¥Î°ú ÍµêÏ†ïÌïòÏã≠ÏãúÏò§.
3. **Í∞úÏ°∞Ïãù Í∞ïÏ†ú:** Î™®Îì† Î¨∏Ïû•ÏùÄ Î™ÖÏÇ¨Ìòï(~Ìï®, ~Ïùå, ~Í≤∞Ï†ï)ÏúºÎ°ú ÎÅùÎÇ¥Ïã≠ÏãúÏò§. Ï§ÑÍ∏Ä ÏÑúÏà†ÌòïÏùÄ Ï†àÎåÄ Í∏àÏßÄÏûÖÎãàÎã§.
4. **Í∞ÄÎèÖÏÑ± Í∞ïÌôî:** Ìï≠Î™©Ïùò ÏÑ±Í≤©Ïóê ÎßûÎäî Ïù¥Î™®ÏßÄÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÏãúÍ∞ÅÏ†ÅÏúºÎ°ú Íµ¨Î∂ÑÌï¥Ï£ºÏã≠ÏãúÏò§.

[Îß§Ïö∞ Ï§ëÏöî - Ï∂úÎ†• Î∞©Ïãù]
**ÏÇ¨Ïö©ÏûêÍ∞Ä Í≤∞Í≥ºÎ•º Ìïú Î≤àÏóê Î≥µÏÇ¨Ìï† Ïàò ÏûàÎèÑÎ°ù, Ï†ÑÏ≤¥ ÎãµÎ≥Ä ÎÇ¥Ïö©ÏùÑ ÏΩîÎìú Î∏îÎ°ù(\`\`\`text ... \`\`\`) ÏïàÏóê ÎÑ£Ïñ¥ÏÑú Ï∂úÎ†•ÌïòÏã≠ÏãúÏò§.**

[Ï∂úÎ†• ÏñëÏãù - ÏΩîÎìú Î∏îÎ°ù ÎÇ¥Î∂Ä ÎÇ¥Ïö©]
[ÏöîÏïΩ]
(Ï†ÑÏ≤¥ ÎÇ¥Ïö©ÏùÑ ÌïµÏã¨Îßå 3Ï§ÑÎ°ú ÏöîÏïΩ. Î≤àÌò∏ Îß§Í∏∞Í∏∞)
1. Ï≤´ Î≤àÏß∏ ÌïµÏã¨ Í≤∞Î°† (~Ìï®)
2. Îëê Î≤àÏß∏ ÌïµÏã¨ Í≤∞Î°† (~Ìï®)
3. ÏÑ∏ Î≤àÏß∏ ÌïµÏã¨ Í≤∞Î°† (~Ìï®)

[ÏÉÅÏÑ∏]
(Ï£ºÏ†úÎ≥ÑÎ°ú Í∑∏Î£πÌôîÌïòÏó¨ ÏûëÏÑ±. ÏïÑÎûò Ïù¥Î™®ÏßÄ ÌôúÏö©)
üìå [Ï£ºÏ†ú 1 Ï†úÎ™©]
- (ÎÇ¥Ïö©) ~~~Ìï®
- (ÎÇ¥Ïö©) ~~~Ïùå
   ‚îî ‚úîÔ∏è (ÏÑ∏Î∂ÄÏÇ¨Ìï≠) ~~~ ÌôïÏù∏

üìå [Ï£ºÏ†ú 2 Ï†úÎ™©]
- (ÎÇ¥Ïö©) ~~~ Î≥¥Í≥†
   ‚îî ‚ö†Ô∏è (Ïù¥ÏäàÏÇ¨Ìï≠) ~~~ Î¨∏Ï†ú Î∞úÏÉù

[Í≤∞Í≥º]
(Í≤∞Ï†ï ÏÇ¨Ìï≠Í≥º Ìñ•ÌõÑ Í≥ÑÌöç Î™ÖÏãú)
‚úÖ Í≤∞Ï†ïÏÇ¨Ìï≠: ~~~ ÏäπÏù∏ ÏôÑÎ£å
üìÖ Ìñ•ÌõÑÍ≥ÑÌöç:
- [10/25] Ï§ëÍ∞Ñ Ï†êÍ≤Ä (Îã¥Îãπ: ÌôçÍ∏∏Îèô)
- [11/01] ÏµúÏ¢Ö Î≥¥Í≥†

----
(Ïó¨Í∏∞ Î∞ëÏóê ÌöåÏùò ÎÇ¥Ïö©ÏùÑ Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî)
`;
            navigator.clipboard.writeText(promptText).then(() => {
                alert('‚úÖ ÌîÑÎ°¨ÌîÑÌä∏Í∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!\n\nAIÍ∞Ä ÎãµÎ≥ÄÏùÑ Ï§Ñ Îïå [Copy] Î≤ÑÌäºÏù¥ Îã¨Î¶∞ ÏÉÅÏûêÏóê Îã¥ÏïÑÏÑú Ï§Ñ Í≤ÅÎãàÎã§.\nÍ∑∏ Î≤ÑÌäºÏùÑ ÎàåÎü¨ÏÑú Ìé∏ÌïòÍ≤å Î≥µÏÇ¨Ìï¥Ïò§ÏÑ∏Ïöî.');
            });
        }

        // 3. ÌÖçÏä§Ìä∏ ÌååÏã± (ÏΩîÎìúÎ∏îÎ°ù Í∏∞Ìò∏ Ï†úÍ±∞ Í∏∞Îä• Ï∂îÍ∞Ä)
        function applyFormat() {
            let rawText = document.getElementById('in-raw-text').value;

            // ÌïµÏã¨: ÏÇ¨Ïö©ÏûêÍ∞Ä ÏΩîÎìúÎ∏îÎ°ùÏß∏Î°ú Î≥µÏÇ¨Ìï¥ÏôîÏùÑ Í≤ΩÏö∞, ÏïûÎí§Ïùò ```text, ``` Îì±ÏùÑ Ï†úÍ±∞
            rawText = rawText.replace(/^```[a-zA-Z]*\n?/g, '').replace(/```$/g, '').trim();
            
            let summary = "";
            let detail = "";
            let result = "";

            try {
                const summaryMatch = rawText.match(/\[ÏöîÏïΩ\]([\s\S]*?)(\[ÏÉÅÏÑ∏\]|$)/);
                const detailMatch = rawText.match(/\[ÏÉÅÏÑ∏\]([\s\S]*?)(\[Í≤∞Í≥º\]|$)/);
                const resultMatch = rawText.match(/\[Í≤∞Í≥º\]([\s\S]*?)($)/);

                if (summaryMatch) summary = summaryMatch[1].trim();
                if (detailMatch) detail = detailMatch[1].trim();
                if (resultMatch) result = resultMatch[1].trim();

                if (!summary && !detail && !result) {
                    detail = rawText; 
                    if(rawText.trim() !== "") alert("‚ö†Ô∏è ÌòïÏãùÏùÑ Í∞êÏßÄÌïòÏßÄ Î™ªÌñàÏäµÎãàÎã§. (Ï†ÑÏ≤¥ ÎÇ¥Ïö©Ïù¥ ÏÉÅÏÑ∏Ïóê ÌëúÏãúÎê©ÎãàÎã§)");
                }

            } catch (e) {
                console.error(e);
                detail = rawText;
            }

            document.getElementById('out-summary').innerText = summary ? summary : "- ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.";
            document.getElementById('out-detail').innerText = detail ? detail : "- ÏÉÅÏÑ∏ ÎÇ¥Ïö©Ïù¥ ÌëúÏãúÎê©ÎãàÎã§.";
            
            const resultWrapper = document.getElementById('out-result-wrapper');
            const resultDiv = document.getElementById('out-result');
            
            if (result) {
                resultDiv.innerText = result;
                resultWrapper.style.display = 'block';
            } else {
                resultWrapper.style.display = 'none';
            }
        }

        // 4. PDF Îã§Ïö¥Î°úÎìú
        function exportPDF() {
            const element = document.getElementById('report-content');
            const opt = {
                margin: 0,
                filename: `Report_${dateInput.value}.pdf`,
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 2, useCORS: true, logging: false },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }

        // 5. JPG Îã§Ïö¥Î°úÎìú
        function exportJPG() {
            const element = document.getElementById('report-content');
            html2canvas(element, { scale: 2, useCORS: true, logging: false }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Report_${dateInput.value}.jpg`;
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                link.click();
            });
        }
    </script>
</body>
</html>
