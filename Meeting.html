<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Samsung Style Meeting Report (Smart Format)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --samsung-blue: #1428A0;
            --dark-navy: #03142F;
            --section-bg: #F7F8FA;
            --white: #FFFFFF;
            --font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
        }
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        body {
            font-family: var(--font-family); background-color: #eef1f5; margin: 0; padding: 40px;
            display: flex; justify-content: center; gap: 40px; color: #333; flex-wrap: wrap; 
        }

        .editor-panel {
            width: 400px; background: var(--white); padding: 32px; border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); height: fit-content;
            position: sticky; top: 20px; z-index: 10;
        }
        .editor-panel h2 {
            font-size: 20px; font-weight: 700; color: var(--samsung-blue);
            margin: 0 0 24px 0; border-bottom: 2px solid var(--samsung-blue); padding-bottom: 12px;
        }

        .input-group { margin-bottom: 20px; }
        .input-group label {
            display: block; font-size: 12px; font-weight: 700; color: #555;
            margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;
        }
        .input-field {
            width: 100%; padding: 12px; border: 1px solid #ddd;
            background-color: #fcfcfc; border-radius: 4px; font-family: inherit; font-size: 15px; 
            box-sizing: border-box; transition: border 0.2s;
        }
        .input-field:focus { border-color: var(--samsung-blue); outline: none; }
        textarea.input-field { resize: vertical; min-height: 200px; line-height: 1.6; }

        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 24px; }
        .btn-row { display: flex; gap: 10px; } 
        
        button { cursor: pointer; font-family: inherit; transition: all 0.2s; border: none; border-radius: 4px;}
        
        .btn-copy-prompt {
            background: #333; color: white; padding: 12px; width: 100%;
            font-size: 13px; font-weight: 700; 
        }
        .btn-copy-prompt:hover { background: #555; transform: translateY(-1px); }

        .btn-format {
            background: var(--samsung-blue); color: white; padding: 16px;
            font-size: 15px; font-weight: 700; width: 100%; box-shadow: 0 4px 10px rgba(20, 40, 160, 0.2);
        }
        .btn-format:hover { background: #102080; transform: translateY(-1px); }

        .btn-download {
            background: var(--white); color: var(--dark-navy); border: 1px solid #ccc;
            padding: 12px; font-size: 13px; font-weight: 600; flex: 1;
        }
        .btn-download:hover { background: #f0f0f0; border-color: #999; }
        
        .preview-wrapper {
            flex: 1; display: flex; justify-content: center; background: #525659;
            padding: 40px; border-radius: 8px; overflow-x: auto; 
        }
        #report-content {
            width: 210mm; min-height: 297mm; flex-shrink: 0; background: white;
            padding: 25mm; box-sizing: border-box; position: relative;
            box-shadow: 0 0 25px rgba(0,0,0,0.3);
        }

        .doc-header {
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 25px; border-bottom: 2px solid var(--dark-navy); padding-bottom: 15px;
        }
        .doc-type { font-size: 11px; font-weight: 800; color: var(--samsung-blue); letter-spacing: 2px; display: block; margin-bottom: 4px; text-transform: uppercase;}
        .header-left h1 { font-size: 26px; font-weight: 800; margin: 0; color: var(--dark-navy); letter-spacing: -0.5px; }
        .header-right { text-align: right; font-size: 12px; color: #555; font-weight: 500; line-height: 1.4; }

        .executive-summary {
            background-color: var(--section-bg); border-left: 5px solid var(--samsung-blue);
            padding: 15px 20px; margin-bottom: 25px; border-radius: 0 4px 4px 0;
        }
        .section-label {
            font-size: 12px; font-weight: 800; color: var(--samsung-blue);
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; display: block;
        }
        .summary-text { 
            font-size: 14px; line-height: 1.6; color: #222; font-weight: 600; white-space: pre-line; 
        }

        .detail-section { margin-bottom: 20px; }
        .detail-content { 
            font-size: 14px; line-height: 1.7; color: #333; white-space: pre-wrap; 
            text-align: justify; word-break: keep-all; 
        }
        
        /* [ìˆ˜ì •ë¨] ê²°ê³¼ ì„¹ì…˜: ì—¬ë°± ì™„ì „ ì œê±° ë° íƒ€ì´íŠ¸í•˜ê²Œ ì¡°ì • */
        .result-section { 
            margin-top: 20px; 
            padding: 15px 15px 10px 15px; /* í•˜ë‹¨ íŒ¨ë”©ì„ ì¤„ì„ */
            border: 1px solid #ddd; 
            background: #fff; 
            border-radius: 4px; 
            display: none; 
            height: fit-content; /* ë‚´ìš©ë¬¼ í¬ê¸°ì— ë”± ë§ì¶¤ */
            min-height: 0; /* ìµœì†Œ ë†’ì´ ì œê±° */
        }
        .result-title { 
            font-size: 14px; font-weight: 800; color: var(--dark-navy); margin-bottom: 8px; display: block; 
            border-bottom: 1px dashed #ccc; padding-bottom: 6px;
        }
        /* ê²°ê³¼ í…ìŠ¤íŠ¸ ìì²´ì˜ ìœ„ì•„ë˜ ê³µë°± ì œê±° ë° ì¤„ê°„ê²© ì¡°ì • */
        #out-result { 
            margin-top: 0; 
            padding-top: 2px; 
            line-height: 1.5;
            white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ ìœ ì§€ */
        }

        .doc-footer {
            position: absolute; bottom: 15mm; left: 25mm; right: 25mm;
            border-top: 1px solid #eee; padding-top: 10px;
            display: flex; justify-content: space-between; font-size: 10px; color: #aaa;
            font-family: Arial, sans-serif;
        }

        @media screen and (max-width: 1000px) {
            body { padding: 10px; gap: 20px; flex-direction: column; }
            .editor-panel { width: 100%; padding: 20px; }
            .preview-wrapper { width: 100%; padding: 10px; align-items: flex-start; justify-content: flex-start; }
            #report-content { transform: scale(0.65); transform-origin: top left; margin-bottom: -40%; }
        }
    </style>
</head>
<body>

    <div class="editor-panel">
        <h2>Report Generator</h2>
        
        <div class="input-group">
            <label>Date & Info</label>
            <input type="date" id="in-date" class="input-field" style="margin-bottom: 8px;">
            <input type="text" id="in-author" class="input-field" placeholder="ì‘ì„±ì (ì˜ˆ: ê¹€ëŒ€ì›)">
        </div>

        <div class="input-group">
            <label>Title</label>
            <input type="text" id="in-title" class="input-field" placeholder="íšŒì˜/ë³´ê³ ì„œ ì œëª©">
        </div>
        
        <div class="input-group" style="background: #eef1f5; padding: 15px; border-radius: 6px; border: 1px solid #ddd;">
            <label style="color:var(--samsung-blue); margin-bottom: 6px;">STEP 1. AI í”„ë¡¬í”„íŠ¸ ë³µì‚¬</label>
            <div style="font-size: 12px; color: #666; margin-bottom: 12px; line-height: 1.4;">
                <b>[íŒ]</b> AI ë‹µë³€ì˜ <b>[Copy]</b> ë²„íŠ¼ìœ¼ë¡œ ë³µì‚¬í•˜ì„¸ìš”.
            </div>
            <button class="btn-copy-prompt" onclick="copyPrompt()">ğŸ“‹ í”„ë¡¬í”„íŠ¸ ë³µì‚¬í•˜ê¸°</button>
        </div>

        <div class="input-group">
            <label>STEP 2. AI ë‹µë³€ ë¶™ì—¬ë„£ê¸°</label>
            <textarea id="in-raw-text" class="input-field" 
                placeholder="AI ë‹µë³€ ìš°ì¸¡ ìƒë‹¨ì˜ [Copy] ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³µì‚¬í•œ ë‚´ìš©ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></textarea>
        </div>

        <div class="btn-group">
            <button class="btn-format" onclick="applyFormat()">âœ¨ ë³´ê³ ì„œ ì ìš©í•˜ê¸°</button>
            <div class="btn-row">
                <button class="btn-download" onclick="exportPDF()">PDF ì €ì¥</button>
                <button class="btn-download" onclick="exportJPG()">JPG ì €ì¥</button>
            </div>
        </div>
    </div>

    <div class="preview-wrapper">
        <div id="report-content">
            <header class="doc-header">
                <div class="header-left">
                    <span class="doc-type">Meeting Report</span>
                    <h1 id="out-title">ì œëª© ì—†ìŒ</h1>
                </div>
                <div class="header-right">
                    <div id="out-date"></div>
                    <div id="out-author"></div>
                    <div style="color:#888; margin-top:4px;">Dept. Organic Material System Eng.</div>
                </div>
            </header>

            <section class="executive-summary">
                <span class="section-label">Executive Summary</span>
                <div class="summary-text" id="out-summary">- ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
            </section>

            <section class="detail-section">
                <span class="section-label" style="color: #666; border-bottom: 1px solid #ddd; width: 100%; padding-bottom: 5px; margin-bottom: 15px;">Detailed Information</span>
                <div class="detail-content" id="out-detail">- ìƒì„¸ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>

                <div class="detail-content result-section" id="out-result-wrapper">
                    <!-- [ìˆ˜ì •ë¨] íƒ€ì´í‹€ ê°„ì†Œí™”: ê²°ì • ì‚¬í•­ -->
                    <span class="result-title">â–  ê²°ì • ì‚¬í•­</span>
                    <div id="out-result"></div>
                </div>
            </section>

            <footer class="doc-footer">
                <div>Confidential / Internal Use Only</div>
                <div>Generated by Smart Report Tool</div>
            </footer>
        </div>
    </div>

    <script>
        const dateInput = document.getElementById('in-date');
        const today = new Date();
        dateInput.value = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
        
        function updateMeta() {
            const dateVal = dateInput.value.split('-');
            if(dateVal.length === 3) {
                document.getElementById('out-date').innerText = `Date: ${dateVal[0]}.${dateVal[1]}.${dateVal[2]}`;
            }
            const authorVal = document.getElementById('in-author').value;
            document.getElementById('out-author').innerText = authorVal ? `Author: ${authorVal}` : '';
            
            const titleVal = document.getElementById('in-title').value;
            document.getElementById('out-title').innerText = titleVal ? titleVal : "ì œëª© ì—†ìŒ";
        }

        ['in-date', 'in-author', 'in-title'].forEach(id => {
            document.getElementById(id).addEventListener('input', updateMeta);
        });
        updateMeta();

        // í”„ë¡¬í”„íŠ¸: ìƒê° ê¸ˆì§€, ì›ë¬¸ ë‹¨ì–´ ì‚¬ìš© ê°•ì œ
        function copyPrompt() {
            const promptText = `
ë‹¹ì‹ ì€ 'ê±´ì¡°í•œ ì†ê¸°ì‚¬'ì…ë‹ˆë‹¤. ì…ë ¥ëœ íšŒì˜ ë‚´ìš©ì„ ì •ë¦¬í•˜ì—¬ ë³´ê³ ì„œë¥¼ ì‘ì„±í•˜ì‹­ì‹œì˜¤.

[ì ˆëŒ€ ì›ì¹™ - ìœ„ë°˜ ì‹œ ì˜¤ë‹µ ì²˜ë¦¬]
1. **ì°½ì‘ ê¸ˆì§€:** ë‹¹ì‹ ì˜ ì˜ê²¬ì´ë‚˜ í•´ì„ì„ ë§ë¶™ì´ì§€ ë§ˆì‹­ì‹œì˜¤. íšŒì˜ë¡ì— ìˆëŠ” íŒ©íŠ¸ë§Œ ì „ë‹¬í•˜ì‹­ì‹œì˜¤.
2. **ì›ë¬¸ ë‹¨ì–´ ìœ ì§€:** ê°€ê¸‰ì  íšŒì˜ë¡ ì›ë¬¸ì— ì‚¬ìš©ëœ ê³ ìœ ëª…ì‚¬ì™€ ì „ë¬¸ ìš©ì–´ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤. (ë©‹ìˆê²Œ ë³´ì´ë ¤ê³  ë‹¨ì–´ë¥¼ ë°”ê¾¸ì§€ ë§ ê²ƒ)
3. **ê°œì¡°ì‹ ê°•ì œ:** ëª¨ë“  ë¬¸ì¥ì€ "~í•¨", "~ìŒ", "~ê²°ì •", "~ì™„ë£Œ"ë¡œ ëë‚´ì‹­ì‹œì˜¤. ì¤„ê¸€ ê¸ˆì§€.
4. **ê°€ë…ì„±:** ì´ëª¨ì§€ë¥¼ í™œìš©í•˜ì—¬ ì‹œê°ì ìœ¼ë¡œ ì •ë¦¬í•˜ì‹­ì‹œì˜¤.

[ì¶œë ¥ ë°©ì‹]
**ë°˜ë“œì‹œ ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ê¸° í¸í•˜ê²Œ 'ì½”ë“œ ë¸”ë¡(\`\`\`text)' ì•ˆì— ë‹´ì•„ì„œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.**

[ì¶œë ¥ ì–‘ì‹]
[ìš”ì•½]
(í•µì‹¬ë§Œ 3ì¤„ë¡œ ìš”ì•½)
1. ì²« ë²ˆì§¸ ê²°ë¡  (~í•¨)
2. ë‘ ë²ˆì§¸ ê²°ë¡  (~í•¨)
3. ì„¸ ë²ˆì§¸ ê²°ë¡  (~í•¨)

[ìƒì„¸]
(ì£¼ì œë³„ ê·¸ë£¹í™”)
ğŸ“Œ [ì£¼ì œ]
- (ë‚´ìš©) ~~~í•¨
- (ë‚´ìš©) ~~~ìŒ
   â”” âœ”ï¸ (ì„¸ë¶€ì‚¬í•­) ~~~ í™•ì¸

[ê²°ê³¼]
(ìµœì¢… ê²°ì •ëœ ì‚¬í•­ë§Œ ëª…ë£Œí•˜ê²Œ)
âœ… ê²°ì •: ~~~ ìŠ¹ì¸ë¨
ğŸ“… ê³„íš:
- [ë‚ ì§œ] í•  ì¼ (ë‹´ë‹¹ì)

----
(ì—¬ê¸° ë°‘ì— íšŒì˜ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”)
`;
            navigator.clipboard.writeText(promptText).then(() => {
                alert('âœ… í”„ë¡¬í”„íŠ¸ ë³µì‚¬ ì™„ë£Œ!\n\nAIì˜ ì°½ì‘ì„ ë§‰ê³  íŒ©íŠ¸ë§Œ ê±´ì¡°í•˜ê²Œ ì •ë¦¬í•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.\nì±„íŒ…ì°½ì— ë¶™ì—¬ë„£ê³  íšŒì˜ë¡ì„ ì…ë ¥í•˜ì„¸ìš”.');
            });
        }

        function applyFormat() {
            let rawText = document.getElementById('in-raw-text').value;
            rawText = rawText.replace(/^```[a-zA-Z]*\n?/g, '').replace(/```$/g, '').trim();
            
            let summary = "";
            let detail = "";
            let result = "";

            try {
                const summaryMatch = rawText.match(/\[ìš”ì•½\]([\s\S]*?)(\[ìƒì„¸\]|$)/);
                const detailMatch = rawText.match(/\[ìƒì„¸\]([\s\S]*?)(\[ê²°ê³¼\]|$)/);
                const resultMatch = rawText.match(/\[ê²°ê³¼\]([\s\S]*?)($)/);

                if (summaryMatch) summary = summaryMatch[1].trim();
                if (detailMatch) detail = detailMatch[1].trim();
                if (resultMatch) result = resultMatch[1].trim();

                if (!summary && !detail && !result) {
                    detail = rawText; 
                }

            } catch (e) {
                console.error(e);
                detail = rawText;
            }

            // íŠ¸ë¦¼(trim)ì„ í•´ì„œ ì•ë’¤ ê³µë°±ì„ í•œ ë²ˆ ë” ì œê±°
            document.getElementById('out-summary').innerText = summary ? summary.trim() : "- ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
            document.getElementById('out-detail').innerText = detail ? detail.trim() : "- ìƒì„¸ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.";
            
            const resultWrapper = document.getElementById('out-result-wrapper');
            const resultDiv = document.getElementById('out-result');
            
            if (result) {
                resultDiv.innerText = result.trim(); // ê²°ê³¼ í…ìŠ¤íŠ¸ ê³µë°± ì œê±°
                resultWrapper.style.display = 'block';
            } else {
                resultWrapper.style.display = 'none';
            }
        }

        function exportPDF() {
            const element = document.getElementById('report-content');
            const opt = {
                margin: 0,
                filename: `Report_${dateInput.value}.pdf`,
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 2, useCORS: true, logging: false },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }

        function exportJPG() {
            const element = document.getElementById('report-content');
            html2canvas(element, { scale: 2, useCORS: true, logging: false }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Report_${dateInput.value}.jpg`;
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                link.click();
            });
        }
    </script>
</body>
</html>
